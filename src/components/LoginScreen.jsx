import { useState } from 'react';
import { useAuth } from '../contexts/AuthContext';

export function LoginScreen() {
  const { login } = useAuth();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  async function handleSubmit(e) {
    e.preventDefault();
    setError('');
    setIsSubmitting(true);

    try {
      await login(email, password);
    } catch (err) {
      setError(err.message);
    } finally {
      setIsSubmitting(false);
    }
  }

  return (
    <div className="login-screen">
      <div className="login-card">
        <svg className="login-logo" viewBox="0 0 415 155" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M336.955 0L337.956 0.00585938C380.296 0.541931 414.454 35.0324 414.454 77.5C414.454 119.967 380.296 154.457 337.956 154.993L336.955 154.999H74.1299V154.926C32.8915 153.162 0.00020075 119.173 0 77.5C0 35.8272 32.8914 1.83652 74.1299 0.0722656V0H336.955Z" fill="#EBFF00"/>
          <path d="M334.459 109.093C331.36 109.093 328.895 108.389 327.063 106.98C325.302 105.572 324.246 103.564 323.894 100.958L323.049 100.641C321.71 102.05 320.302 103.388 318.823 104.656C317.343 105.853 315.97 106.839 314.702 107.614C313.434 108.319 312.343 108.671 311.427 108.671C308.68 108.671 306.215 108.002 304.031 106.663C301.848 105.325 300.122 103.494 298.854 101.169C297.587 98.8451 296.953 96.2391 296.953 93.3513C296.953 91.1678 297.516 89.3013 298.643 87.7517C299.84 86.1317 301.32 85.0752 303.08 84.5822L323.471 79.8279L323.577 77.2922C323.577 74.2635 322.767 71.904 321.147 70.2136C319.597 68.5231 317.379 67.6779 314.491 67.6779C312.519 67.6779 310.406 68.171 308.152 69.157C305.898 70.0727 303.89 71.2349 302.13 72.6435L301.179 72.2209L299.383 65.8818C301.425 64.6845 303.714 63.4871 306.25 62.2897C308.786 61.0219 311.18 59.9653 313.434 59.1201C315.759 58.2749 317.519 57.8523 318.717 57.8523C322.802 57.8523 326.148 58.4862 328.754 59.754C331.36 61.0219 333.262 62.7475 334.459 64.931C335.656 67.044 336.255 69.474 336.255 72.2209C336.255 73.1366 336.149 74.5453 335.938 76.447C335.727 78.3487 335.48 80.4265 335.199 82.6804C334.917 84.9343 334.67 87.0826 334.459 89.1252C334.248 91.1678 334.142 92.7878 334.142 93.9852C334.142 95.3234 334.459 96.3799 335.093 97.1547C335.797 97.9295 336.748 98.3169 337.945 98.3169C338.861 98.3169 339.777 98.1056 340.692 97.683C341.679 97.2604 342.453 96.873 343.017 96.5208L344.602 98.7395C343.897 99.9369 342.982 101.31 341.855 102.86C340.728 104.339 339.53 105.677 338.262 106.875C336.995 108.002 335.727 108.741 334.459 109.093ZM315.336 98.6338C316.393 98.6338 317.625 98.3521 319.034 97.7886C320.513 97.1547 321.816 96.4152 322.943 95.5699L323.26 85.533L311.955 88.7026C310.265 89.1956 309.42 90.3578 309.42 92.1891C309.42 94.0204 309.948 95.57 311.004 96.8378C312.131 98.0352 313.575 98.6338 315.336 98.6338Z" fill="black"/>
          <path d="M280.785 109.093C275.784 109.093 272.121 108.037 269.797 105.924C267.473 103.811 266.31 100.536 266.31 96.0982V72.5379C266.31 70.3544 265.923 68.8753 265.148 68.1005C264.373 67.3257 262.859 66.9031 260.605 66.8327L259.549 66.0931L260.288 60.9162C262.542 59.8597 264.726 58.6975 266.839 57.4297C268.952 56.0914 270.818 54.8588 272.438 53.7319C274.129 52.5345 275.467 51.5836 276.453 50.8793C277.439 50.1045 277.932 49.7171 277.932 49.7171L280.89 51.1963C280.89 51.1963 280.749 52.0063 280.468 53.6262C280.256 55.1758 280.01 57.3945 279.728 60.2823L292.195 59.9653L292.618 60.4936L291.561 67.5723L279.094 67.2553C278.883 70.284 278.707 73.7353 278.566 77.6092C278.496 81.4126 278.46 85.6387 278.46 90.2874C278.46 93.316 278.989 95.4995 280.045 96.8378C281.102 98.176 282.827 98.8452 285.222 98.8452C286.772 98.8452 288.216 98.5986 289.554 98.1056C290.892 97.6125 291.561 97.366 291.561 97.366L292.935 100.747C292.935 100.747 292.442 101.169 291.456 102.015C290.54 102.86 289.378 103.846 287.969 104.973C286.631 106.029 285.292 106.98 283.954 107.826C282.616 108.671 281.559 109.093 280.785 109.093Z" fill="black"/>
          <path d="M236.843 109.093C231.912 109.093 227.651 108.107 224.059 106.135C220.537 104.163 217.79 101.346 215.818 97.683C213.916 94.0204 212.965 89.7239 212.965 84.7935C212.965 80.9196 213.599 77.3626 214.867 74.1227C216.135 70.8827 217.896 68.0653 220.15 65.6705C222.404 63.2053 225.045 61.3036 228.074 59.9653C231.102 58.5567 234.377 57.8523 237.899 57.8523C249.732 57.8523 255.649 63.8392 255.649 75.8131C255.649 76.8696 255.543 77.9613 255.332 79.0883C255.191 80.2152 255.05 81.0957 254.909 81.7296L253.641 82.9974H226.277C226.418 87.8574 227.545 91.6608 229.658 94.4078C231.842 97.0843 234.87 98.5634 238.744 98.8452C242.618 99.1269 247.161 98.0704 252.373 95.6756L253.113 96.0982L254.803 101.275C253.395 102.332 251.634 103.494 249.521 104.762C247.408 105.959 245.224 106.98 242.97 107.826C240.717 108.671 238.674 109.093 236.843 109.093ZM226.277 77.1866L240.752 76.3413C241.597 76.2709 242.125 76.0948 242.337 75.8131C242.618 75.4609 242.759 74.827 242.759 73.9114C242.759 71.3757 242.196 69.4388 241.069 68.1005C239.942 66.7623 238.287 66.0931 236.103 66.0931C233.356 66.0931 231.102 67.044 229.341 68.9457C227.651 70.777 226.63 73.524 226.277 77.1866Z" fill="black"/>
          <path d="M188.041 109.093C183.11 109.093 178.849 108.107 175.257 106.135C171.735 104.163 168.988 101.346 167.016 97.683C165.114 94.0204 164.163 89.7239 164.163 84.7935C164.163 80.9196 164.797 77.3626 166.065 74.1227C167.333 70.8827 169.094 68.0653 171.348 65.6705C173.602 63.2053 176.243 61.3036 179.272 59.9653C182.3 58.5567 185.575 57.8523 189.097 57.8523C200.93 57.8523 206.847 63.8392 206.847 75.8131C206.847 76.8696 206.741 77.9613 206.53 79.0883C206.389 80.2152 206.248 81.0957 206.107 81.7296L204.839 82.9974H177.476C177.616 87.8574 178.743 91.6608 180.856 94.4078C183.04 97.0843 186.069 98.5634 189.942 98.8452C193.816 99.1269 198.359 98.0704 203.571 95.6756L204.311 96.0982L206.001 101.275C204.593 102.332 202.832 103.494 200.719 104.762C198.606 105.959 196.422 106.98 194.168 107.826C191.915 108.671 189.872 109.093 188.041 109.093ZM177.476 77.1866L191.95 76.3413C192.795 76.2709 193.323 76.0948 193.535 75.8131C193.816 75.4609 193.957 74.827 193.957 73.9114C193.957 71.3757 193.394 69.4388 192.267 68.1005C191.14 66.7623 189.485 66.0931 187.301 66.0931C184.554 66.0931 182.3 67.044 180.539 68.9457C178.849 70.777 177.828 73.524 177.476 77.1866Z" fill="black"/>
          <path d="M113.327 109.516C111.214 102.684 109.136 96.2039 107.093 90.0761C105.051 83.8778 103.149 78.2431 101.388 73.1718C99.6273 68.0301 98.113 63.6632 96.8451 60.071H95.9999C95.9999 60.7049 95.9295 62.0079 95.7886 63.9801C95.6478 65.9523 95.4717 68.2766 95.2604 70.9531C95.1195 73.6296 94.9434 76.447 94.7321 79.4053C94.5208 82.2931 94.3095 85.0752 94.0982 87.7517C93.9573 90.3578 93.8165 92.5765 93.6756 94.4078C93.6052 96.2391 93.5699 97.366 93.5699 97.7886C93.5699 100.043 94.6969 101.169 96.9508 101.169C97.3734 101.169 98.0425 101.169 98.9582 101.169C99.8738 101.099 100.402 101.064 100.543 101.064L101.177 101.592L100.015 108.248C99.3104 108.248 98.1482 108.213 96.5282 108.142C94.9786 108.072 93.3586 108.002 91.6682 107.931C90.0482 107.861 88.71 107.826 87.6535 107.826C86.8082 107.826 85.7869 107.861 84.5896 107.931C83.3922 108.002 82.23 108.107 81.103 108.248C79.9761 108.389 79.0252 108.495 78.2505 108.565C77.5461 108.636 77.1939 108.671 77.1939 108.671L77.8278 101.803C79.9409 101.592 81.42 100.958 82.2652 99.9017C83.1809 98.7747 83.85 96.873 84.2726 94.1965C84.4135 93.4217 84.5896 91.9074 84.8009 89.6535C85.0122 87.3996 85.2587 84.7231 85.5404 81.6239C85.8926 78.5248 86.2095 75.3553 86.4913 72.1153C86.8435 68.8049 87.1604 65.6705 87.4421 62.7123C87.7943 59.754 88.0408 57.2888 88.1817 55.3167C88.393 53.2741 88.4987 52.0415 88.4987 51.6189C88.4987 50.2806 88.2521 49.2945 87.7591 48.6606C87.3365 47.9563 86.5265 47.428 85.3291 47.0758C84.2022 46.6532 82.5822 46.3715 80.4691 46.2306L79.9409 45.5967L80.8917 39.4689C82.0891 39.5394 83.533 39.6098 85.2235 39.6802C86.9139 39.7507 88.5691 39.8211 90.1891 39.8915C91.8091 39.962 93.1121 39.9972 94.0982 39.9972C95.2956 39.9972 96.5986 39.9972 98.0073 39.9972C99.4864 39.9268 100.895 39.8563 102.233 39.7859C103.572 39.7154 104.593 39.645 105.297 39.5746C106.776 44.9276 108.256 50.0341 109.735 54.8941C111.214 59.6836 112.552 64.0505 113.749 67.9949C115.017 71.9392 116.074 75.2848 116.919 78.0318C117.835 80.7787 118.469 82.7157 118.821 83.8426H119.666C120.018 82.7861 120.617 80.8844 121.462 78.1374C122.378 75.3905 123.469 72.0449 124.737 68.1005C126.075 64.1562 127.519 59.7893 129.069 54.9997C130.618 50.2102 132.203 45.1741 133.823 39.8915C134.809 39.8915 136.007 39.9268 137.415 39.9972C138.895 40.0676 140.409 40.1028 141.958 40.1028C143.508 40.1028 144.952 40.0676 146.29 39.9972C147.417 39.9972 148.755 39.962 150.305 39.8915C151.925 39.7507 153.369 39.645 154.637 39.5746C155.904 39.4337 156.714 39.3633 157.067 39.3633L157.489 39.7859L156.855 46.125C153.897 46.3363 151.854 46.8645 150.727 47.7098C149.601 48.4845 149.037 49.8228 149.037 51.7245C149.037 52.6402 149.072 54.1897 149.143 56.3732C149.284 58.5567 149.424 61.1275 149.565 64.0858C149.777 66.9736 149.988 70.0727 150.199 73.3831C150.481 76.6231 150.727 79.8279 150.939 82.9974C151.15 86.0965 151.361 88.9139 151.573 91.4495C152.066 95.3234 152.629 97.9295 153.263 99.2678C153.897 100.536 155.059 101.169 156.75 101.169C157.313 101.169 157.912 101.134 158.546 101.064C159.18 100.993 159.567 100.958 159.708 100.958L160.13 101.486L159.18 108.142C158.757 108.142 157.912 108.107 156.644 108.037C155.447 107.966 154.073 107.896 152.524 107.826C151.044 107.826 149.706 107.826 148.509 107.826C147.311 107.826 145.903 107.861 144.283 107.931C142.663 108.002 141.043 108.107 139.423 108.248C137.803 108.389 136.429 108.495 135.302 108.565C134.175 108.636 133.577 108.671 133.506 108.671L134.246 101.803C136.359 101.522 137.873 100.993 138.789 100.219C139.704 99.3734 140.162 98.1408 140.162 96.5208C140.162 95.9573 140.092 94.8656 139.951 93.2456C139.881 91.6256 139.74 89.6535 139.528 87.3291C139.388 85.0048 139.247 82.5044 139.106 79.8279C138.965 77.1514 138.789 74.5453 138.578 72.0096C138.437 69.474 138.296 67.1497 138.155 65.0366C138.014 62.9236 137.944 61.2684 137.944 60.071H136.993C136.007 62.7475 134.915 65.8466 133.718 69.3683C132.52 72.8901 131.182 76.764 129.703 80.99C128.224 85.2161 126.709 89.6535 125.16 94.3021C123.61 98.9508 122.061 103.705 120.511 108.565L113.327 109.516Z" fill="black"/>
        </svg>

        <form className="login-form" onSubmit={handleSubmit}>
          {error && <div className="login-error">{error}</div>}

          <div className="login-field">
            <input
              type="email"
              placeholder="E-mailadres"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              required
              autoFocus
              autoComplete="email"
            />
          </div>

          <div className="login-field">
            <input
              type="password"
              placeholder="Wachtwoord"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              required
              autoComplete="current-password"
            />
          </div>

          <button type="submit" className="login-btn" disabled={isSubmitting}>
            {isSubmitting ? 'Bezig...' : 'Inloggen'}
          </button>
        </form>
      </div>
    </div>
  );
}
